/* ============================================================
   form.css — RecipeHub Form Component Styles
   Description: Form groups, labels, inputs, textareas, selects,
                checkboxes, radio buttons, validation states,
                multi-step progress indicator, ingredient rows.
                Used on submit.html and modal forms.
   ============================================================ */

/* ─── Form Group ──────────────────────────────────────────── */
.form-group {
  margin-bottom: var(--space-5);
}

.form-group:last-child {
  margin-bottom: 0;
}

/* ─── Labels ──────────────────────────────────────────────── */
.form-label {
  display: block;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--color-dark);
  margin-bottom: var(--space-2);
  line-height: 1.4;
}

.form-label .required {
  color: var(--color-primary);
  margin-left: 2px;
}

.form-label .optional {
  font-size: var(--text-xs);
  font-weight: 400;
  color: var(--color-muted);
  margin-left: var(--space-2);
}

/* ─── Text Inputs & Textareas ─────────────────────────────── */
.form-control {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1.5px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-family: var(--font-body);
  color: var(--color-dark);
  background: var(--color-bg-input);
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition-fast);
  appearance: none;
  -webkit-appearance: none;
  line-height: 1.5;
}

.form-control:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(192, 57, 43, 0.1);
  background: var(--color-bg-card);
}

.form-control::placeholder {
  color: var(--color-muted);
}

.form-control:disabled {
  background: var(--color-bg-section);
  color: var(--color-muted);
  cursor: not-allowed;
  opacity: 0.7;
}

/* Textarea */
textarea.form-control {
  resize: vertical;
  min-height: 100px;
}

/* Select */
select.form-control {
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2390A4AE' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 2.5rem;
}

/* ─── Validation States ───────────────────────────────────── */
.form-control.is-valid {
  border-color: var(--color-success);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath d='M3 8l4 4 6-6' stroke='%2327AE60' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 2.5rem;
}

.form-control.is-valid:focus {
  box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.12);
  border-color: var(--color-success);
}

.form-control.is-invalid {
  border-color: var(--color-error);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='6' stroke='%23E74C3C' stroke-width='2' fill='none'/%3E%3Cpath d='M8 5v3M8 10v1' stroke='%23E74C3C' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 2.5rem;
}

.form-control.is-invalid:focus {
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.12);
  border-color: var(--color-error);
}

/* Don't add icon to textarea or select with valid/invalid */
textarea.form-control.is-valid,
textarea.form-control.is-invalid,
select.form-control.is-valid,
select.form-control.is-invalid {
  background-image: none;
  padding-right: 1rem;
}

/* ─── Inline Error Message ────────────────────────────────── */
.form-error {
  display: flex;
  align-items: flex-start;
  gap: var(--space-1);
  margin-top: var(--space-2);
  font-size: var(--text-xs);
  color: var(--color-error);
  font-weight: 500;
  line-height: 1.4;
  animation: fadeInUp 0.2s ease both;
}

.form-error i {
  font-size: 11px;
  margin-top: 2px;
  flex-shrink: 0;
}

/* ─── Helper / Hint Text ──────────────────────────────────── */
.form-hint {
  margin-top: var(--space-2);
  font-size: var(--text-xs);
  color: var(--color-muted);
  line-height: 1.5;
}

/* ─── Input Group (input + button side by side) ───────────── */
.input-group {
  display: flex;
  align-items: stretch;
  gap: 0;
}

.input-group .form-control {
  border-radius: var(--radius-md) 0 0 var(--radius-md);
  border-right: none;
  flex: 1;
}

.input-group .btn {
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  flex-shrink: 0;
}

/* ─── Checkbox & Radio ────────────────────────────────────── */
.form-check {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  cursor: pointer;
  padding: var(--space-2) 0;
}

.form-check input[type="checkbox"],
.form-check input[type="radio"] {
  appearance: none;
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-border);
  border-radius: 4px;
  flex-shrink: 0;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  background: var(--color-bg-input);
  margin-top: 1px;
}

.form-check input[type="radio"] {
  border-radius: 50%;
}

.form-check input[type="checkbox"]:checked,
.form-check input[type="radio"]:checked {
  background: var(--color-primary);
  border-color: var(--color-primary);
}

.form-check input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 4px;
  width: 6px;
  height: 10px;
  border: 2px solid #fff;
  border-top: none;
  border-left: none;
  transform: rotate(45deg);
}

.form-check input[type="radio"]:checked::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #fff;
}

.form-check:hover input {
  border-color: var(--color-primary);
}

.form-check__label {
  font-size: var(--text-sm);
  color: var(--color-dark-mid);
  cursor: pointer;
  line-height: 1.5;
}

/* Inline checkboxes (dietary tags) */
.form-check-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4);
}

/* ─── Pill Toggle (Difficulty selector) ──────────────────── */
.pill-toggle-group {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.pill-toggle {
  position: relative;
}

.pill-toggle input[type="radio"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.pill-toggle__label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: 0.5rem 1.25rem;
  border-radius: var(--radius-full);
  border: 1.5px solid var(--color-border);
  background: var(--color-bg-card);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--color-dark-mid);
  cursor: pointer;
  transition: all var(--transition-fast);
  user-select: none;
}

.pill-toggle__label:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.pill-toggle input:checked + .pill-toggle__label {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: #fff;
  box-shadow: 0 4px 12px rgba(192, 57, 43, 0.25);
}

/* ─── Character Counter ───────────────────────────────────── */
.char-counter {
  display: flex;
  justify-content: flex-end;
  font-size: var(--text-xs);
  color: var(--color-muted);
  margin-top: var(--space-1);
}

.char-counter.near-limit { color: var(--color-warning); }
.char-counter.at-limit   { color: var(--color-error); }

/* ─── Multi-Step Progress Indicator ──────────────────────── */
.step-progress {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: var(--space-12);
  position: relative;
}

/* Connecting line behind steps */
.step-progress::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 80px);
  height: 2px;
  background: var(--color-border-light);
  z-index: 0;
}

.step-progress__item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
  position: relative;
  z-index: 1;
  flex: 1;
  max-width: 140px;
}

/* Step circle */
.step-progress__circle {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: var(--color-bg-card);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-sm);
  font-weight: 700;
  color: var(--color-muted);
  transition: all var(--transition-base);
  position: relative;
}

/* Active step */
.step-progress__item.active .step-progress__circle {
  border-color: var(--color-primary);
  background: var(--color-primary);
  color: #fff;
  box-shadow: 0 0 0 4px var(--color-primary-light);
}

/* Completed step */
.step-progress__item.completed .step-progress__circle {
  border-color: var(--color-success);
  background: var(--color-success);
  color: #fff;
}

.step-progress__item.completed .step-progress__circle::after {
  content: '✓';
  font-size: 1rem;
}

/* Step label */
.step-progress__label {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--color-muted);
  text-align: center;
  transition: color var(--transition-fast);
  white-space: nowrap;
}

.step-progress__item.active .step-progress__label {
  color: var(--color-primary);
}

.step-progress__item.completed .step-progress__label {
  color: var(--color-success);
}

/* ─── Dynamic Ingredient Row ──────────────────────────────── */
.ingredient-row {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr auto;
  gap: var(--space-3);
  align-items: start;
  padding: var(--space-3);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-md);
  background: var(--color-bg-section);
  margin-bottom: var(--space-3);
  transition: all var(--transition-fast);
  animation: fadeInUp 0.2s ease both;
}

.ingredient-row:hover {
  border-color: var(--color-border);
  background: var(--color-bg-card);
}

.ingredient-row__remove {
  width: 34px;
  height: 34px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1.5px solid var(--color-border);
  color: var(--color-muted);
  cursor: pointer;
  font-size: 0.8rem;
  transition: all var(--transition-fast);
  margin-top: 4px;
  flex-shrink: 0;
}

.ingredient-row__remove:hover {
  background: rgba(231, 76, 60, 0.08);
  border-color: var(--color-error);
  color: var(--color-error);
}

/* ─── Step Instruction Row ────────────────────────────────── */
.step-row {
  display: flex;
  gap: var(--space-4);
  align-items: flex-start;
  padding: var(--space-4);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-md);
  background: var(--color-bg-section);
  margin-bottom: var(--space-4);
  animation: fadeInUp 0.2s ease both;
  transition: background var(--transition-fast);
}

.step-row:hover {
  background: var(--color-bg-card);
  border-color: var(--color-border);
}

.step-row__number {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--color-primary);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-xs);
  font-weight: 800;
  flex-shrink: 0;
  font-family: var(--font-mono);
  margin-top: 4px;
}

.step-row__content {
  flex: 1;
}

.step-row__remove {
  width: 34px;
  height: 34px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1.5px solid var(--color-border);
  color: var(--color-muted);
  cursor: pointer;
  font-size: 0.8rem;
  transition: all var(--transition-fast);
  margin-top: 4px;
  flex-shrink: 0;
}

.step-row__remove:hover {
  background: rgba(231, 76, 60, 0.08);
  border-color: var(--color-error);
  color: var(--color-error);
}

/* ─── Form Section (submit page panels) ──────────────────── */
.form-section {
  background: var(--color-bg-card);
  border-radius: var(--radius-xl);
  padding: var(--space-8);
  border: 1px solid var(--color-border-light);
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--space-6);
}

.form-section__header {
  margin-bottom: var(--space-6);
  padding-bottom: var(--space-5);
  border-bottom: 1px solid var(--color-border-light);
}

.form-section__header h3 {
  font-size: var(--text-xl);
  margin-bottom: var(--space-1);
}

.form-section__header p {
  font-size: var(--text-sm);
  color: var(--color-mid);
  margin: 0;
}

/* Two-column form grid */
.form-grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-5);
}

.form-grid-3 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: var(--space-5);
}

/* ─── Form Navigation Buttons ─────────────────────────────── */
.form-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: var(--space-6);
  border-top: 1px solid var(--color-border-light);
  margin-top: var(--space-6);
}

/* ─── Responsive ──────────────────────────────────────────── */
@media (max-width: 768px) {
  .form-grid-2,
  .form-grid-3 {
    grid-template-columns: 1fr;
  }

  .ingredient-row {
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto;
  }

  .ingredient-row .form-group:first-child {
    grid-column: 1 / -1;
  }

  .step-progress::before { display: none; }
  .step-progress { gap: var(--space-2); }
  .step-progress__item { max-width: 80px; }
  .step-progress__label { display: none; }
}

@media (max-width: 480px) {
  .form-section { padding: var(--space-5); }
  .pill-toggle-group { gap: var(--space-2); }
}
